---
title: "Tracker for field data collection"
author: "Anthony Twesigye"
date: "20/01/2022"
output:  
  html_document:
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
knit: (function(inputFile, encoding) { rmarkdown::render(inputFile, encoding = encoding, output_file = paste0(dirname(inputFile), '/field_data_collection_tracker_', format(Sys.Date(), '%Y_%m_%d'),'.html')) })
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE, warning = F, message = F)

# read packages
library(tidyverse)
library(lubridate)
library(glue)
library(leaflet)

# read data 
df_settlement_samples_required <- readr::read_csv("../inputs/Refugee_child_survey_samples_definition.csv") %>% 
  rename(settlement_name = settlement) %>% 
  select(settlement_name, smpl_sz)

df_host_samples_required <- readr::read_csv("../inputs/Host_community_child_survey_samples_definition.csv")%>% 
  rename(sub_county_name =  Sub_county ) %>%
  select(sub_county_name, smpl_sz)

df_tool_data <- readxl::read_excel("../inputs/Child_Protection_Assessment_Child_Tool_Jan2022.xlsx") %>% 
  mutate(uuid = `_uuid`,
         start_date = as_date(start),
         start = as_datetime(start),
         end = as_datetime(end),
         latitude = as.numeric(`_geopoint_latitude`),
         longitude = as.numeric(`_geopoint_longitude`)) %>% 
  filter(consent == "yes",  respondent_age >= 18,
         start_date > as_date("2022-01-20"), 
         !str_detect(string = point_number, pattern = fixed('test', ignore_case = TRUE))
         )

```
